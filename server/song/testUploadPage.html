<!DOCTYPE html>
<html>
  <head>
    <title>Upload Example</title>
  </head>
  <body>
 
    <form id="uploadForm"
          enctype="multipart/form-data"
          action="/song/send"
          method="post">
      <input type="file" id="userSongInput" name="userSong" />
    </form>
 
    <span id="status" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 
    <script> 
      $(document).ready(function() {
        status('Choose a file :)');
        // Check to see when a user has selected a file                                                                                                                
        var timerId;
        timerId = setInterval(function() {
          if($('#userSongInput').val() !== '') {
            clearInterval(timerId);
            $('#uploadForm').submit();
          }
        }, 500);

          $('#uploadForm').submit(function() {
            status('uploading the file ...');
            $(this).ajaxSubmit({                                                                                                                 
              error: function(xhr) {
                status('Error: ' + xhr.status);
              },
              success: function(response) {
                console.log(response);
                //TODO: We will fill this in later
              }
            });
            // Have to stop the form from submitting and causing                                                                                                       
            // a page refresh - don't forget this                                                                                                                      
            return false;
          });

        function status(message) {
          $('#status').text(message);
        }
      });
    </script> 
  </body>
</html>